!function(t,r){"use strict";var n=function(t){throw"ngDonut: "+t};"undefined"==typeof t&&n("Angular is a required library: https://angularjs.org/"),"undefined"==typeof r&&n("D3 is a required library: http://d3js.org/"),t.module("ngDonut",[]).directive("donut",function(){return{restrict:"EA",require:"ngModel",scope:{dataset:"=ngModel",height:"=",width:"=",radius:"=",colours:"="},controller:["$scope",function(t){var n=r.scale.category20();t.currentAngles={},t.getColour=function(r){return t.colours&&t.colours.length>r?t.colours[r]:n(r)},t.getTranslate=function(){return"translate("+t.width/2+","+t.height/2+")"},t.clean=function(t){new RegExp("d+");return t.map(function(t){return isNaN(Number(t))?0:Number(t)})},t.tweenArc=function(r){var n=d3.svg.arc().innerRadius(t.radius-100).outerRadius(t.radius-20),e=d3.interpolate(this._current,r);return this._current=e(0),function(t){return n(e(t))}}}],link:function(t,n){var e=Math.min(t.width,t.height)/2,a=r.layout.pie().sort(null),i=r.svg.arc().innerRadius(e).outerRadius(e-t.radius),u=r.select(n[0]).append("svg").attr("width",t.width).attr("height",t.height).append("g").attr("transform",t.getTranslate()),o=u.selectAll("path").data(a(t.clean(t.dataset))).enter().append("path").attr("fill",function(r,n){return t.getColour(n)}).attr("d",i).each(function(t){this._current=t});t.tweenArc=function(t){var n=r.interpolate(this._current,t);return this._current=n(0),function(t){return i(n(t))}},t.$watchCollection("dataset",function(){o.data(a(t.clean(t.dataset))),o.transition().duration(750).attrTween("d",t.tweenArc)})}}})}(window.angular,window.d3);