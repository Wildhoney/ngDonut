!function(t,e){"use strict";var n=function(t){throw"ngDonut: "+t};"undefined"==typeof t&&n("Angular is a required library: https://angularjs.org/"),"undefined"==typeof e&&n("D3 is a required library: http://d3js.org/"),t.module("ngDonut",[]).directive("donut",function(){return{restrict:"EA",require:"ngModel",scope:{dataset:"=ngModel",height:"=",width:"=",radius:"=",colours:"="},controller:["$scope",function(t){var n=e.scale.category20();t.currentAngles={},t.getColour=function(e){return t.colours&&t.colours.length>e?t.colours[e]:n(e)},t.getTranslate=function(){return"translate("+t.getWidth()/2+","+t.getHeight()/2+")"},t.getWidth=function(){return t.width||400},t.getHeight=function(){return t.height||400},t.getRadius=function(){return t.radius||Math.min(t.getWidth(),t.getHeight())/2},t.clean=function(t){return t.map(function(t){return isNaN(Number(t))?0:Number(t)})},t.tweenArc=function(e){var n=d3.svg.arc().innerRadius(t.getRadius()-100).outerRadius(t.getRadius()-20),r=d3.interpolate(this._current,e);return this._current=r(0),function(t){return n(r(t))}}}],link:function(t,n){var r=Math.min(t.getWidth(),t.getHeight())/2,i=e.layout.pie().sort(null),u=e.svg.arc().innerRadius(r).outerRadius(r-t.getRadius()),a=e.select(n[0]).append("svg").attr("width",t.getWidth()).attr("height",t.getHeight()).append("g").attr("transform",t.getTranslate()),o=a.selectAll("path").data(i(t.clean(t.dataset))).enter().append("path").attr("fill",function(e,n){return t.getColour(n)}).attr("d",u).each(function(t){this._current=t});t.tweenArc=function(t){var n=e.interpolate(this._current,t);return this._current=n(0),function(t){return u(n(t))}},t.$watchCollection("dataset",function(){o.data(i(t.clean(t.dataset))),o.transition().duration(750).attrTween("d",t.tweenArc)})}}})}(window.angular,window.d3);