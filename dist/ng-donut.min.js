!function(t,e){"use strict";var r=function(t){throw"ngDonut: "+t};"undefined"==typeof t&&r("Angular is a required library: https://angularjs.org/"),"undefined"==typeof e&&r("D3 is a required library: http://d3js.org/"),t.module("ngDonut",[]).directive("donut",function(){return{restrict:"EA",require:"ngModel",scope:{dataset:"=ngModel",height:"=",width:"=",radius:"=",colours:"=",stroke:"=",strokeWidth:"="},controller:["$scope",function(t){var r=e.scale.category20();t.currentAngles={},t.getColour=function(e){return t.colours&&t.colours.length>e?t.colours[e]:r(e)},t.getTranslate=function(){return"translate("+t.getWidth()/2+","+t.getHeight()/2+")"},t.getWidth=function(){return t.width||400},t.getHeight=function(){return t.height||400},t.getRadius=function(){return t.radius||Math.min(t.getWidth(),t.getHeight())/2},t.clean=function(t){return t.map(function(t){return isNaN(Number(t))?0:Number(t)})},t.tweenArc=function(e){var r=d3.svg.arc().innerRadius(t.getRadius()-100).outerRadius(t.getRadius()-20),n=d3.interpolate(this._current,e);return this._current=n(0),function(t){return r(n(t))}}}],link:function(t,r){var n=Math.min(t.getWidth(),t.getHeight())/2,i=e.layout.pie().sort(null),a=e.svg.arc().innerRadius(n).outerRadius(n-t.getRadius()),u=e.select(r[0]).append("svg").attr("width",t.getWidth()).attr("height",t.getHeight()).append("g").attr("transform",t.getTranslate()),o=u.selectAll("path").data(i(t.clean(t.dataset))).enter().append("path").attr("fill",function(e,r){return t.getColour(r)}).attr("d",a).each(function(t){this._current=t});t.stroke&&o.attr("stroke",t.stroke),t.strokeWidth&&o.attr("stroke-width",t.strokeWidth),t.tweenArc=function(t){var r=e.interpolate(this._current,t);return this._current=r(0),function(t){return a(r(t))}},t.$watchCollection("dataset",function(){o.data(i(t.clean(t.dataset))),o.transition().duration(750).attrTween("d",t.tweenArc)})}}})}(window.angular,window.d3);